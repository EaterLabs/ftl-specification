



Faster-Than-Light Standardization Effort              M. Casadevall, Ed.
Internet-Draft                                                Indepedent
Intended status: Informational                           January 5, 2021
Expires: July 9, 2021


           Faster-Than-Light Streaming Protocl Specification
                       draft-ftl-specification-00

Abstract

   With the demise of Microsoft's Mixer, the future of the Faster-Than-
   Light (FTL) streaming protocol has been left in doubt.  As the
   Internet's first practical subsecond streaming protocol, several
   successors to Mixer have decided to re-implement FTL from the
   original SDK and notes.  While Mixer's original FTL specification had
   a de-facto specification in the form of ftl-sdk, the source code was
   in-complete, and several aspects of the FTL were left undocumented.

   In an effort to keep FTL viable and cross-service compatible, this
   specification denotes a canonical implementation of FTL, handshake
   protocols, WebRTC notes, and all relevant information as relating to
   FTL with the hope that FTL may still be continued as a vechile for
   low latency video streaming over the Internet.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on July 9, 2021.

Copyright Notice

   Copyright (c) 2021 IETF Trust and the persons identified as the
   document authors.  All rights reserved.





Casadevall                Expires July 9, 2021                  [Page 1]

Internet-Draft              Abbreviated Title               January 2021


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.

Table of Contents

   1.  Introduction and Overview . . . . . . . . . . . . . . . . . .   2
   2.  Design Tradeoffs/Limtations . . . . . . . . . . . . . . . . .   3
   3.  One-to-Many WebRTC  . . . . . . . . . . . . . . . . . . . . .   3
   4.  Charon Negotation Protocol  . . . . . . . . . . . . . . . . .   4
     4.1.  Message Format  . . . . . . . . . . . . . . . . . . . . .   4
     4.2.  Response Codes  . . . . . . . . . . . . . . . . . . . . .   4
     4.3.  Charon Verbs  . . . . . . . . . . . . . . . . . . . . . .   4
       4.3.1.  HMAC  . . . . . . . . . . . . . . . . . . . . . . . .   4
       4.3.2.  CONNECT . . . . . . . . . . . . . . . . . . . . . . .   4
         4.3.2.1.  ProtocolVersion . . . . . . . . . . . . . . . . .   5
         4.3.2.2.  VendorName  . . . . . . . . . . . . . . . . . . .   5
         4.3.2.3.  VendorVersion . . . . . . . . . . . . . . . . . .   5
         4.3.2.4.  Video . . . . . . . . . . . . . . . . . . . . . .   5
         4.3.2.5.  VideoCodex  . . . . . . . . . . . . . . . . . . .   5
         4.3.2.6.  VideoHeight . . . . . . . . . . . . . . . . . . .   5
         4.3.2.7.  VideoWidth  . . . . . . . . . . . . . . . . . . .   5
         4.3.2.8.  VideoPayloadType  . . . . . . . . . . . . . . . .   5
         4.3.2.9.  VideoIngestSSRC . . . . . . . . . . . . . . . . .   5
         4.3.2.10. Audio . . . . . . . . . . . . . . . . . . . . . .   5
         4.3.2.11. AudioCodec  . . . . . . . . . . . . . . . . . . .   5
         4.3.2.12. AudioPayloadType  . . . . . . . . . . . . . . . .   6
         4.3.2.13. AudioIngestSSRC . . . . . . . . . . . . . . . . .   6
       4.3.3.  DISCONNECT  . . . . . . . . . . . . . . . . . . . . .   6
   5.  Styx Protocol Ingest Behavior . . . . . . . . . . . . . . . .   6
   6.  Babel Transcoding Behavior  . . . . . . . . . . . . . . . . .   6
   7.  WebRTC Last Mile Negotations  . . . . . . . . . . . . . . . .   6
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .   6

1.  Introduction and Overview

   This specification covers several components of the FTL protocol
   stream, and is primarily derieved from the implementation used at
   Mixer and the freely available source code in ftl-sdk.  This document
   details the handshaking protocol known as Charon, the SRTP ingest
   behaviors, and defines a recommended ingest->endpoint streaming
   protocol, as well as notes in regards to implementation of the last
   mile WebRTC connections.





Casadevall                Expires July 9, 2021                  [Page 2]

Internet-Draft              Abbreviated Title               January 2021


   FTL was specifically designed with the following objectives in mind
   which is must handle at all times.

   o  Real-world 500 millsecond delay for streamer to receiver broadcast
      under normal cirmstances at 30 FPS or more

      *  At the time of it's implementation, 720p streaming was
         considered the best possible for most users, however,
         advancements in technology have allowed for 1080p streaming.

   o  That FTL has be technology neutral; it should be able to use any
      video or audio codec as supported by WebRTC (or another last mile
      technology) independently.  The original FTL implemntation used
      VP8 and Opus, later ones used H.264, keeping with the original
      intent.

   o  It is expected that to reduce latency, an FTL deployment has
      multiple ingest and points of presenses for client connections.  A
      stream connects to one ingest point, and then data is routed to
      points of presence as necessary.

   o  FTL end-points must support being behind anycast, as well as use
      of STUN, and TURN if necessary

   o  Use of standards based technology for use in a web browser with no
      additional software or downloads for viewers

   As originally designed, the following criticera were also kept in
   mind, although not realized at least during the initial
   implementation phases.

   o  Use of IPv6

      *  IPv6 deployment and usage was considered highly desirable for
         multiple reasons, primarily to simplify routing and mandated
         multicast support; as implemented, there should be no known
         IPv6 problems, but the protocol never tested either.

2.  Design Tradeoffs/Limtations

   TBD

3.  One-to-Many WebRTC

   TBD






Casadevall                Expires July 9, 2021                  [Page 3]

Internet-Draft              Abbreviated Title               January 2021


4.  Charon Negotation Protocol

   Charon handles negotation of RTP streams to Styx, and acts as an out
   of band signaling method for FTL stream behavior.  The Charon
   connection MUST be kept-alive at all times as a TCP/IP connection on
   port 8084 (MC: should apply for IANA number).  If the TCP/IP
   connection is reset, the broadcaster MUST assume that the ingest
   point of presense has become unavailable, and begin clean-up and
   teardown.  Likewise, the ingest daemon MUST begin teardown and
   disregard any UDP traffic from the streamer upon Charon connection
   loss.

   The Charon protocol is built upon ASCII verbs with optional
   arguments.  The lifecycle of this connection under normal cirmstances
   is as follows.

   o  Broadcaster connects to ingest on TCP/IP 8084

   o  Broadcaster gets HMAC authentication

   o  Broadcaster generates HMAC authentication based off streamer
      connection ID and channel idea

   o  Broadcaster sends CONNECT, combined with stream paramters.

   o  Ingest sends FTL_OK or FTL_REJECT based on settings

   o  If FLT_OK, Broadcaster sends RTP streams to the media port
      indicated by the ingest

4.1.  Message Format

4.2.  Response Codes

4.3.  Charon Verbs

4.3.1.  HMAC

   TDB

4.3.2.  CONNECT

   TDB








Casadevall                Expires July 9, 2021                  [Page 4]

Internet-Draft              Abbreviated Title               January 2021


4.3.2.1.  ProtocolVersion

   TBD

4.3.2.2.  VendorName

   TBD

4.3.2.3.  VendorVersion

   TBD

4.3.2.4.  Video

   TBD

4.3.2.5.  VideoCodex

   TBD

4.3.2.6.  VideoHeight

   TBD

4.3.2.7.  VideoWidth

   TBD

4.3.2.8.  VideoPayloadType

   TBD

4.3.2.9.  VideoIngestSSRC

   TBD

4.3.2.10.  Audio

   TBD

4.3.2.11.  AudioCodec

   TBD








Casadevall                Expires July 9, 2021                  [Page 5]

Internet-Draft              Abbreviated Title               January 2021


4.3.2.12.  AudioPayloadType

   TBD

4.3.2.13.  AudioIngestSSRC

   TBD

4.3.3.  DISCONNECT

   TBD

5.  Styx Protocol Ingest Behavior

   TBD

6.  Babel Transcoding Behavior

   TBD

7.  WebRTC Last Mile Negotations

   TBD

Author's Address

   Michael Casadevall (editor)
   Indepedent
   Jersey City
   United States

   Email: michael@casadevall.pro



















Casadevall                Expires July 9, 2021                  [Page 6]
